// SPDX-License-Identifier: BUSL-1.1
pragma solidity ^0.8.28;

import {Test} from "forge-std/Test.sol";

import {Debugger} from "common/utils/Debugger.sol";
import {VerifySilo} from "silo-core/deploy/silo/VerifySilo.s.sol";
import {NewMarketTest} from "../newMarkets/NewMarket.t.sol";

/*
    config address must be establish before test, use test_xdc_debugger_deploy to do that
    
    RPC_URL=$RPC_XDC CONFIG=0x1E2E07127A4e1b5c6A4407b52EEeE248D34Dc08f \
    EXTERNAL_PRICE_0=744 EXTERNAL_PRICE_1=9999 \
    FOUNDRY_PROFILE=core_test forge test --ffi --mc DeployOnXDCTest -vvv
*/
contract DeployOnXDCTest is NewMarketTest {
    function _beforeSetupHook() internal override {
        super._beforeSetupHook();

        _deployMarket();
    }

    /*
    FOUNDRY_PROFILE=core_test forge test -vv --ffi --mt test_xdc_deploy
    */
    function test_xdc_deploy() public {
        // vm.createSelectFork(vm.envString("RPC_XDC"), 94262914);

        // address deployer = 0x27a96951d7aad034265A285C395225C295384688;

        // deployer.call(hex"27bafe4600000000000000000000000000000000000000000000000000000000000003800000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000076000000000000000000000000000000000000000000000000000000000000008c0000000000000000000000000aad2f138eb20fb60c34ac70624339ccbac2320fa000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000214e8348c4f0000000000000000000000000000951857744785e80e2de051c32ee7b25f9c458c42000000000000000000000000be8ad92c301ba97beedea9af9b761834fbd0ea220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000363c09672a18af5e36d6ae1757dc0751b0a16b000000000000000000000000000000000000000000000000000a688906bd8b00000000000000000000000000000000000000000000000000000b1a2bc2ec5000000000000000000000000000000000000000000000000000000a688906bd8b000000000000000000000000000000000000000000000000000000f8b0a10e47000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fa2958cb79b0491cc627c1557f441ef849ca8eb1000000000000000000000000d53692704f8fe7683e2cd7078ada5fe3d33562440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000363c09672a18af5e36d6ae1757dc0751b0a16b000000000000000000000000000000000000000000000000000b1a2bc2ec5000000000000000000000000000000000000000000000000000000bcbce7f1b1500000000000000000000000000000000000000000000000000000853a0d2313c000000000000000000000000000000000000000000000000000000b1a2bc2ec50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001800000000000000000000000000000000000000000000000000000000000000200000000000000000000000000be8ad92c301ba97beedea9af9b761834fbd0ea220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d53692704f8fe7683e2cd7078ada5fe3d3356244000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000c7d713b49da00010000000000000000000000000000000000000000000000000c7d713b49da00020000000000000000000000000000000000000000000000000c7d713b49da0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002ce38267a00000000000000000000000000000000000000000000000000000000ef680cd3000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fca32dc55c700000000000000000000000000000000000000000000000000000000d7773ebe000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000c7d713b49da00010000000000000000000000000000000000000000000000000c7d713b49da00020000000000000000000000000000000000000000000000000c7d713b49da0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002ce38267a00000000000000000000000000000000000000000000000000000000ef680cd3000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fca32dc55c700000000000000000000000000000000000000000000000000000000d7773ebe00000000000000000000000000000000000000000000000000000000000000000000000000000000000000004d25031857a0ac2d855fad858cc5c374106c6a5f00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000020000000000000000000000000e8e8041cb5e3158a0829a19e014ca1cf91098554");
    }

    /*
    RPC_URL=$RPC_XDC CONFIG=0x1E2E07127A4e1b5c6A4407b52EEeE248D34Dc08f \
    EXTERNAL_PRICE_0=744 EXTERNAL_PRICE_1=9999 \
    FOUNDRY_PROFILE=core_test forge test --ffi --mt test_xdc_debugger_deploy -vvvv
    */
    function test_xdc_debugger_deploy() public {
        // _deployMarket();
    }

    function test_xdc_debugger_verifySilo() public {
        VerifySilo v = new VerifySilo();
        v.run();
    }

    function _deployMarket() internal {
        Debugger debugger = Debugger(payable(0x2AeC24E2fac282134C28c419CD44b021412C1Fd1));

        debugger.exe(
            0x931e59f06b83dD3d9A622FD4537989B6C63B9bde,
            hex"27bafe4600000000000000000000000000000000000000000000000000000000000003800000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000076000000000000000000000000000000000000000000000000000000000000008c0000000000000000000000000aad2f138eb20fb60c34ac70624339ccbac2320fa000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000214e8348c4f0000000000000000000000000000951857744785e80e2de051c32ee7b25f9c458c42000000000000000000000000be8ad92c301ba97beedea9af9b761834fbd0ea220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ad84b07082c67a1105b933c28f8c8ba5b89dfcfa0000000000000000000000000000000000000000000000000a688906bd8b00000000000000000000000000000000000000000000000000000b1a2bc2ec5000000000000000000000000000000000000000000000000000000a688906bd8b000000000000000000000000000000000000000000000000000000f8b0a10e47000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fa2958cb79b0491cc627c1557f441ef849ca8eb1000000000000000000000000d53692704f8fe7683e2cd7078ada5fe3d33562440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ad84b07082c67a1105b933c28f8c8ba5b89dfcfa0000000000000000000000000000000000000000000000000b1a2bc2ec5000000000000000000000000000000000000000000000000000000bcbce7f1b1500000000000000000000000000000000000000000000000000000853a0d2313c000000000000000000000000000000000000000000000000000000b1a2bc2ec50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001800000000000000000000000000000000000000000000000000000000000000200000000000000000000000000be8ad92c301ba97beedea9af9b761834fbd0ea220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d53692704f8fe7683e2cd7078ada5fe3d3356244000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000c7d713b49da00010000000000000000000000000000000000000000000000000c7d713b49da00020000000000000000000000000000000000000000000000000c7d713b49da0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002ce38267a00000000000000000000000000000000000000000000000000000000ef680cd3000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fca32dc55c700000000000000000000000000000000000000000000000000000000d7773ebe000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000c7d713b49da00010000000000000000000000000000000000000000000000000c7d713b49da00020000000000000000000000000000000000000000000000000c7d713b49da0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002ce38267a00000000000000000000000000000000000000000000000000000000ef680cd3000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fca32dc55c700000000000000000000000000000000000000000000000000000000d7773ebe00000000000000000000000000000000000000000000000000000000000000000000000000000000000000002a3ba33389cedaf9bbc8b00f5f9e8732d805e3e200000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000020000000000000000000000000e8e8041cb5e3158a0829a19e014ca1cf91098554"
        );
    }
}
